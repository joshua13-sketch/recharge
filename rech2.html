<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        margin: 0%;
        padding: 0%;
        box-sizing: border-box;
    }
   body {
      font-family: Arial, sans-serif;
      /* display: flex; */
      width: 80%;
      margin: 80px auto;
      gap: 20px;
      /* justify-content: space-between; */
      justify-content: center;
      align-items: center;
      height: 40vh;
      background: #f4f4f4;
    }
     .container {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      width: 1300px;
      /* height: 1000px; */
    }
   
    .container h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
      font-size: 40px;
    }
    .form-group {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }
    .form-group input, 
    .form-group select {
      flex: 1;
      padding: 10px;
      border: 1px solid blue;
      width: 400px;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 18px;
      height: 60px;
      border-radius: 5px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-size: 18px;
      font-weight: bold;
      color: #444;
    }
    .btn {
      width: 100%;
      padding: 12px;
      background: #007bff;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn:hover {
      background: #0056b3;
    }
    .error {
      color: red;
      font-size: 14px;
      margin-top: -10px;
      margin-bottom: 10px;
    }
   #gender{
    width: 610px;
   }
   #dob{
    width: 610px;
   }
   #amount{
    width: 610px;
   }
   #genotype{
    width: 610px;
   }
   #rechargeCode{
    width: 610px;
   }
   #pinInput{
    width: 610px;
   }
   #network{
    width: 610px;
   }
   #recharge{
    background-color: blue;
    color: white;
    border-radius: 5px;
    border: none;
    padding: 15px 12px;
    margin-top: 28px;
    font-size: 16px;
   }
   #generate{
    background-color: blue;
    color: white;
    border-radius: 5px;
    border: none;
    padding: 15px 12px;
    margin-top: 28px;
    font-size: 16px;
   }
   #save{
    background-color: blue;
    color: white;
    border-radius: 5px;
    border: none;
    padding: 15px 12px;
    margin-top: 28px;
    font-size: 16px;
   }
   .para{
    display: flex;
    color: black;
    justify-content: space-between;
    width: 80%;
    margin-left: 30px;
    margin-top: 30px;
    font-size: 15px;
    font-weight: bolder;
    text-align: center;
   }
   table { 
    width:100%; 
    border-collapse:collapse; 
    margin-top:14px; 
    border: none;
}
    th, td { 
        /* border:1px solid #ddd;  */
        padding:8px; 
        text-align:center; 
      
    }
    th { 
      background:#fafafa; 
    }
    .code-list {
      display:none; 
      background:#000; 
      color:#fff; 
      padding:10px; 
      border-radius:8px; 
      max-height:180px; 
      overflow:auto;
      margin-top:-6px; 
      margin-bottom:10px;
    }
     .code-item { 
      padding:8px; 
      cursor:pointer; 
      border-radius:6px; 
    }
     .btn-delete {
      background-color:green  ;
       color:#fff; 
       border:none;
        border-radius:6px;
         padding:6px 10px;
          cursor:pointer;
    }
    .fex{
      /* display: flex; */
      /* flex-direction: column; */
      /* justify-content: space-between; */
    }
    @media (max-width:1500px) {
        .container{
          width: 1200px;
        }
        #network{
          width: 580px;
        }
         #pinInput{
          width: 580px;
        }
          #amount{
          width: 580px;
        }
          #rechargeCode{
          width: 580px;
        }
    }
     @media (max-width:1380px) {
        .container{
          width: 1100px;
        }
        #network{
          width: 530px;
        }
         #pinInput{
          width: 530px;
        }
          #amount{
          width: 530px;
        }
          #rechargeCode{
          width: 530px;
        }
    }
    @media (max-width:1280px) {
        .container{
          width: 1000px;
        }
        #network{
          width: 480px;
        }
         #pinInput{
          width: 480px;
        }
          #amount{
          width: 480px;
        }
          #rechargeCode{
          width: 480px;
        }
    }
     @media (max-width:1160px) {
        .container{
          width: 900px;
        }
        #network{
          width: 430px;
        }
         #pinInput{
          width: 430px;
        }
          #amount{
          width: 430px;
        }
          #rechargeCode{
          width: 430px;
        }
    }
     @media (max-width:1040px) {
        .container{
          width: 800px;
        }
        #network{
          width: 380px;
        }
         #pinInput{
          width: 380px;
        }
          #amount{
          width: 380px;
        }
          #rechargeCode{
          width: 380px;
        }
    }
     @media (max-width:925px) {
        .container{
          width: 700px;
        }
        #network{
          width: 330px;
        }
         #pinInput{
          width: 330px;
        }
          #amount{
          width: 330px;
        }
          #rechargeCode{
          width: 330px;
        }
    }
    @media (max-width:820px) {
        .container{
          width: 600px;
        }
        #network{
          width: 550px;
        }
         #pinInput{
          width: 550px;
        }
          #amount{
          width: 550px;
        }
          #rechargeCode{
          width: 550px;
        }
        .form-group{
          flex-direction: column;
        }
        .fex {
          /* flex-direction: column; */
          /* text-align: left; */
        }
    }
     
    
</style>
<body>     
        
        <div class="container">
    <h2>RECHARGE CARD</h2>
      <div class="form-group">
       <div>
          <label>Network: <span style="color:red;"></span></label>
          <select id="network">
            <option value="">Select your network</option>
            <option>Glo</option>
            <option>MTN</option>
            <option>Airtel</option>
            <option>9 Mobile</option>
          </select>
        </div>
        <div>
          <label>Pin <span style="color:red;"></span></label>
          <input type="text" id="pinInput" placeholder="">
        </div>
        <!-- <label for="pinInput">Pin (paste here to recharge)</label> -->
  <div class="row">
    <!-- <input id="pinInput" type="text" placeholder="Enter PIN to recharge" /> -->
    
  </div>
    
      </div>

      <div class="form-group">
        <div>
          <label>Amount: <span style="color:red;"></span></label>
          <select id="amount">
            <option value=""> Select Amount</option>
            <option>100</option>
            <option>200</option>
            <option>500</option>
            <option>1000</option>
          </select>
        </div>
        <div>
         <button id="recharge" onclick="recharge()">Recharge</button>
        </div>
      </div>

      <div class="form-group">
        <div>
           <div>
          <label>Recharge Code<span style="color:red;"></span></label>
          <input type="text" id="rechargeCode">
          <!-- <label for="rechargeCode">Recharge Code (pick from list)</label> -->
           <div id="codeList" class="code-list"></div>
        </div>
        </div>
        
      </div>
      <div>
        <button id="generate"  onclick="generate()">Generate</button>
          <button id="save">Save</button>
      </div>
      <!-- <div class="para"> -->
          <table>
    <thead>
      <tr class="fex">
        <th>S/N</th>
        <th>Network</th>
        <th>Amount</th>
        <th>Pin</th>
        <th>Recharge Code</th>
        <th>Status</th>
        <th>Date Created</th>
        <th>Date Used</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
      </div>
    
</div>
   
    





     <script>
    let generatedCodes = [];
    let selectedCode = "";
    let savedCards = [];
//functions
  const codeInput  = document.getElementById("rechargeCode");
  const codeList   = document.getElementById("codeList");
  const tableBody  = document.getElementById("tableBody");
  const pinInput   = document.getElementById("pinInput");
  const networkSel = document.getElementById("network");
  const amountSel  = document.getElementById("amount");

   // Helpers
  function makeRandomPin() {
    // 12-digit numeric PIN
    return Math.floor(100000000000 + Math.random() * 900000000000).toString();
  }

  function generateCodes() {
    generatedCodes = Array.from({ length: 10 }, makeRandomPin);
    renderCodeList();
  }
   function renderCodeList() {
    codeList.innerHTML = "";
    generatedCodes.forEach(code => {
      const item = document.createElement("div");
      item.className = "code-item";
      item.textContent = code;
      item.onclick = () => {
        selectedCode = code;
        codeInput.value = selectedCode;
        codeList.style.display = "none";
      };
      codeList.appendChild(item);
    });
    codeList.style.display = "block";
  }

  codeInput.addEventListener("click", generateCodes);


  // document.getElementById("generate").addEventListener("click", () => {
  //   if (!selectedCode) {
  //     alert("Please click a PIN from the black list first.");
  //     return;
  //   }
  //   codeInput.value = selectedCode;
  // });

  
  document.getElementById("save").addEventListener("click", () => {
    // if (!selectedCode) {
    //   alert("Select a PIN, then click Generate before saving.");
    //   return;
    // }

    let dateCreated = new Date().toLocaleDateString(); // <-- variable has no spaces

    const card = {
      sn: savedCards.length + 1,
      network: networkSel.value,
      amount: amountSel.value,
      pin: selectedCode,
      rechargeCode: `*123*${codeInput}#`,
      status: "Unused",            
      dateCreated: new Date().toLocaleDateString(),     
      dateUsed: "Not ye used"      
    };

    savedCards.push(card);
    renderTable();

    // reset picker
    selectedCode = "";
    codeInput.value = "";
  });

  // Recharge flow
  document.getElementById("rechargeBtn").addEventListener("click", () => {
    const enteredPin = pinInput.value.trim();
    if (!enteredPin) return alert("Please enter a recharge PIN.");

    const card = savedCards.find(c => c.pin === enteredPin);

    if (!card) return alert("Invalid PIN!");
    if (card.status === "Used") return alert("This PIN has already been used.");

    card.status = "Used";
    card.dateUsed = new Date().toLocaleDateString();
    alert("Recharge successful!");
    renderTable();
    pinInput.value = "";
  });

  function renderTable() {
    tableBody.innerHTML = "";
    savedCards.forEach((c, i) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${c.network}</td>
        <td>${c.amount}</td>
        <td>${c.pin}</td>
        <td>${c.rechargeCode}</td>
        <td>${c.status}</td>
        <td>${c.dateCreated}</td>
        <td>${c.dateUsed}</td>
        <td><button class="btn-delete" data-index="${i}">Delete</button></td>
      `;
      tableBody.appendChild(tr);
    });

    // Hook up delete buttons
    tableBody.querySelectorAll(".btn-delete").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = Number(e.currentTarget.getAttribute("data-index"));
        savedCards.splice(idx, 1);     // array method to remove
        renderTable();
      });
    });
  }
  function recharge() {
    // if  rechargeCode: `*123*${selectedCode}#`,
    alert("recharge successful")
    
  }
  letcodeInput = document.getElementById("codeInp");
  function generate(){
    let code = Math.floor(Math.random() *100000000000);
    codeInput.value = code;
  }
  

  </script>
</body>

</html>

  
 




